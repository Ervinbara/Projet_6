{% extends 'base.html.twig' %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="../assets/css/navbar_other_page.css"/>
{% endblock %}

{% block body %}

<div class="example-wrapper">
    <h2>Trick : {{ figure.name }}</h2>
    <h3>Catégorie : {{ figure.category.title }}</h3>
    <h3>Description : {{ figure.description }}</h3>
    <a class="nav-link" href="{{ path('edit_figure',{'id': figure.id}) }}">Modifier</a>
    <div class="figure_img">
        {% for image in figure.images %}
            <div>
                <img src="{{ asset('/images/figures/uploads/'~image.name) }}" alt="figure" width="150">
            </div>
        {% endfor %} 
    </div>
</div>

<section id="commentaires">
        <h2>{{ figure.comments | length }}Commentaire </h2>
        {% for comment in figure.comments %} <!--Pour chaque commentaire dans les commentaire de l'article-->
            <div class="comment container">
                <div class="info container">
                    <div class="username">
                        {{comment.author}} 
                    </div>
                    <div class="post_date">
                        {{comment.createdAt | date('d/m/Y')}}
                    </div>
                </div>
                <div class="text container">
                    <div class="text">
                        {{comment.content | raw}}
                        {# {% if app.user %}
                            {% if comment.report == 0 %}
                                <a href="{{ path('report',{'id': comment.id}) }}" class="report"><acronym title="Signalé ce commentaire ?"><i class="far fa-flag"></i></acronym>
                                </a> 
                            {% else %}
                            <div class="report"><acronym title="Commentaire signalé, l'admin s'en occupe"><i class="fas fa-flag"></i></acronym></div>
                            {% endif %}
                        {% endif %} #}
                    </div> 
                </div>
                
            </div>
            {# <div class="js-report" data-is-authenticated="{{ comment.id }}"></div> #}
        {% endfor %}
        
        <h2>Laisse un commentaire</h2>
        {% if app.user %}
        
        {{form_start(commentForm)}}

        {{form_row(commentForm.content,{'attr': {'placeholder':"Contenu"} }) }}

        <button type="submit" class="btn send">Envoyer</button>
        {{form_end(commentForm)}}
        {% else %}
            <h3>Connexion requise</h3>
            <p><a href="{{path('security_login')}}" class="btn btn-primary">Connexion</a>
            ou <a href="{{path('security_registration')}}" class="btn btn-primary">Pas de compte ?</a>
            </p>
            
        {% endif %}
    </section>
{% endblock %}
